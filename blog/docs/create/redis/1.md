## 一、介绍

Redis是一个开源的内存数据库，可以用作数据库、缓存和消息中间件。Redis提供像strings、hashes、lists、sets和zset等数据结构。Redis具有内置的(主从)复制、Lua脚本和集群等功能。



## 二、安装

### 1. Linux环境

~~~bash
$ wget https://download.redis.io/releases/redis-6.2.4.tar.gz
$ tar -zxzf redis-6.2.4.tar.gz
$ cd redis-6.2.4
$ make
$ make install
~~~



### 2. Windows环境

[GitHub下载地址](https://github.com/microsoftarchive/redis/releases)(Win安装包)





## 三、基本数据类型命令

### (一) string

#### 1. SET

1. 命令参数总览

~~~bash
$ SET key value [EX seconds|PX milliseconds|EXAT timestamp|PXAT milliseconds-timestamp|KEEPTTL] [NX|XX] [GET]

# key必须是字符串，否则会返回error；设置成功返回OK
# 时间复杂度：O(1)
~~~

2. 命令参数介绍
   - EX：为秒为单位指定过期时间（时间间隔）
   - PX：为毫秒为单位指定过期时间（时间间隔）
   - EXAT：用秒级时间戳指定过期时间点（时间间刻）
   - EPAT：用毫秒级时间戳指定过期时间点（时间间刻）
   - NX：如果不存在这个key才设置相应的内容
   - XX：如果存在这个key才设置相应的内容
   - *KEEPTTL：保留与该key相关联的生存时间

#### 2. GET

~~~bash
$ GET key

# 返回value
# 时间复杂度：O(1)
~~~

#### 3. APPEND

~~~bash
$ APPEND key value

# 返回拼接后的字符串长度
# 时间复杂度：O(1)
~~~

#### 4. MSET

1. 命令参数总览

~~~bash
$ MSET key value [key value ...]

# 时间复杂度：O(n)
~~~

2. 命令参数介绍

可同时设置多组key-value

#### 5. MGET

1. 命令参数总览

~~~bash
MGET key [key ...]

# 时间复杂度：O(n)
~~~

2. 命令参数介绍

可同时获取多组value

#### 6. GETSET

~~~bash
$ GETSET key value

# 设置新value，获取旧value
# 时间复杂度：O(1)
~~~

#### 7. GETDEL

~~~bash
$ GETDEL key

# 获取值，并删除该key
# 时间复杂度：O(1)
~~~

#### 8. GETRANGE

~~~bash
$ GETRANGE key start end

# 获取子串
# 时间复杂度：O(n)
~~~

#### 9. INCR/INCRBY

~~~bash
INCR key
INCRBY key increment

# 给value加1(或increment)，限制于value为10进制的int64整数；如果不是指定范围的整数，则返回error
# 时间复杂度：O(1)
~~~

#### 10. DECR/DECRBY

~~~bash
DECR key
DECRBY key increment

# 给value减1(或increment)，限制于value为10进制的int64整数；如果不是指定范围的整数，则返回error
# 时间复杂度：O(1)
~~~

#### 11. STRLEN

~~~bash
$ STRLEN key

# 返回value的长度，key不存在返回0
# 时间复杂度：O(1)
~~~



### (二) hash

#### 1. HSET

~~~bash
$ HSET key field value [field value ...]

# 设置key的field值(可同时设置多个)
# 时间复杂度：O(1)或O(n)
~~~

#### 2. HGET

~~~bash
$ HGET key field

# 返回存储在key的对应field的值
# 时间复杂度：O(1)
~~~

#### 3. HMSET

~~~bash
$ HSET key field value [field value ...]

# 同时设置key的多个的field值(可只设置一个)
# 时间复杂度：O(n)
~~~

#### 4. HMGET

~~~bash
$ HMGET key field [field ...]

# 同时获取key的多个field值
# 时间复杂度：O(n)
~~~

#### 5. HDEL

~~~bash
$ HDEL key field [field ...]

# 删除key的字段(可同时删除多个)
# 时间复杂度：O(n)
~~~

#### 6. HEXISTS

~~~bash
$ HEXISTS key field

# 判断key里是否存在field，存在 ? 1 : 0
# 时间复杂度：O(1)
~~~

#### 7. HGETALL

~~~bash
$ HGETALL key

# 返回所有的field和value
# 时间复杂度：O(n)
~~~

#### 8. HINCRBY

~~~bash
$ HINCRBY key field increment

# 规则与string一致
# 时间复杂度：O(1)
~~~

#### 9. HKEYS

~~~bash
$ HKEYS key

# 获取key下所有的field
# 时间复杂度：O(n)
~~~

#### 10. HVALS

~~~bash
$ HVALS key

# 获取key下所有的field对应的value
# 时间复杂度：O(n)
~~~

#### 11. HLEN

~~~bash
$ HLEN key

# 获取key下field的个数
# 时间复杂度：O(1)
~~~

#### 12. HSETNX

~~~bash
$ HSETNX key field value

# 如果key不含有field，则设置对应值
# 时间复杂度：O(1)
~~~

#### 13. HRANDFIELD

~~~bash
$ HRANDFIELD key [count [WITHVALUES]]

# 随机返回一个field。如果设置count，则随机返回count个。如果加上WITHVALUES，则连带对应value一起返回
# 时间复杂度：O(n)

# >=6.2.0
~~~

#### 14. HSTRLEN

~~~bash
$ HSTRLEN key field

# 返回field对应value的长度
# 时间复杂度：O(1)
~~~



### (三) list

#### 1. LPUSH

~~~bash
$ LPUSH key element [element ...]

# 从左侧放置元素(支持多个)
# 时间复杂度：O(1)或O(n)
~~~

#### 2. RPUSH

~~~bash
$ RPUSH key element [element ...]

# 从右侧放置元素(支持多个)
# 时间复杂度：O(1)或O(n)
~~~

#### 3. LPOP

~~~bash
$ LPOP key [count]

# 从左端(head)移除count数量的元素并返回(默认移除一个)
# 时间复杂度：O(n)
~~~

#### 4. RPOP

~~~bash
$ RPOP key [count]

# 从右侧(tail)出队count数量的元素(count默认为1)
# 时间复杂度：O(n)
~~~

#### 5. LINDEX

~~~bash
$ LINDEX key index

# 获取指定索引的value，不存在返回nil
# 时间复杂度：O(1)
~~~

#### 6. LINSERT

~~~bash
$ LINSERT key BEFORE|AFTER pivot element

# 在pivot前|后(左|右)插入一个元素。如果key不存在则不进行任何操作，如果key存在但不是list结构则返回error
# 时间复杂度：O(n)
~~~

#### 7. LLEN

~~~bash
$ LLEN key

# 返回key的长度(元素个数)
# 时间复杂度：O(1)
~~~

#### 8. LMOVE

~~~bash
$ LMOVE source destination LEFT|RIGHT LEFT|RIGHT

# 移除source的一个左边或右边(LEFT|RIGHT)，添加到destination的左边或右边(LEFT|RIGHT)。将该元素返回。如果source不存在，则不执行任何操作。允许source和destination为同一list。
# 时间复杂度：O(1)

# >=6.2.0。此命令要代替RPOPLPUSH，宣布RPOPLPUSH进入Deprecated(弃用)阶段
~~~

#### 9. LPOS

~~~bash
$ LPOS key element [RANK rank] [COUNT num-matches] [MAXLEN len]

# 返回element相对左侧的索引。RANK指从匹配到的第几个开始(若为-1则从右向左)，COUNT指匹配数量(默认为1，设置为0则返回全部)，当COUNT被设置为0时使用MAXLEN做最大限制
# 时间复杂度：O(n)

# >=6.0.6
~~~

#### 10. LRANGE

~~~bash
$ LRANGE key start stop

# 按索引取start和stop间的元素，包括start和stop
# 时间复杂度：O(s+n)
~~~

#### 11. LREM

~~~bash
$ LREM key count element

# 如果count>0，则从head->tail移除|count|个element
# 如果count<0，则从tail->head移除|count|个element
# 如果count=0，则移除所有element
# 时间复杂度：O(n+m)
~~~

#### 12. LSET

~~~bash
$ LSET key index element

# 给指定的索引设置值。如果index超出界限则返回error
# 时间复杂度：O(n)
~~~

#### 13. LTRIM

~~~bash
$ LTRIM key start stop

# 只保留start和stop间的元素，包括start和stop本身
# 时间复杂度：O(n)
~~~



